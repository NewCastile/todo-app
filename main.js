(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};function t(e){var t=document.createElement("form"),n=document.createElement("div"),r=document.createElement("input"),d=document.createElement("input"),o=document.createElement("input"),i=document.createElement("button"),c=document.createElement("button");return r.type="text",r.name="description",r.placeholder="Description",d.type="date",d.name="dueDate",d.placeholder="Due Date",o.type="text",o.name="priority",o.placeholder="Priority",i.type="button",c.type="submit",i.innerText="Go Back",c.innerText="Submit","add-todo"==e?t.classList.add("add-todo-form"):"edit-todo"==e&&t.classList.add("edit-todo-form"),i.classList.add("btn"),i.classList.add("go-back-btn"),c.classList.add("btn"),c.classList.add("form-submit-btn"),n.appendChild(i),n.appendChild(c),t.appendChild(r),t.appendChild(d),t.appendChild(o),t.appendChild(n),t}function n(e){var t=document.createElement("form"),n=document.createElement("div"),r=document.createElement("input"),d=document.createElement("button"),o=document.createElement("button");return r.type="text",r.name="name",r.placeholder="Name",d.innerText="Go Back",o.innerText="Submit",o.type="submit","add-project"==e?t.classList.add("add-project-form"):"edit-project"==e&&t.classList.add("edit-project-form"),d.classList.add("btn"),d.classList.add("go-back-btn"),o.classList.add("btn"),o.classList.add("form-submit-btn"),n.appendChild(d),n.appendChild(o),t.appendChild(r),t.appendChild(n),t}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}e.d({},{q:()=>C});var d=document.querySelector(".rendered-list"),o=document.querySelector(".add-todo-btn"),i=document.querySelector(".add-project-btn"),c=document.querySelector(".card-content"),a=document.querySelector(".todo-list");function l(e){e.preventDefault();var t,n,r=document.querySelector(".add-project-form"),d=new FormData(r);if(""==d.get("name"))return alert("You must enter a name");E((t=d.get("name"),n=Date.now().toString(),Object.assign({},{name:t,id:n,todos:[]}))),r.reset(),r.remove(),i.style.display="block"}function s(e){e.preventDefault(),function(e){var t=C.findIndex((function(t){return t.id==e})),n=t-1,r=t+1;if(C[n])C.splice(t,1),g(),L(C[n]);else{if(!C[r])return;C.splice(t,1),g(),L(C[t])}}(e.target.parentElement.parentElement.id)}function u(e){e.preventDefault();var t,n,d,i,c,a,l,s,u=document.querySelector(".add-todo-form"),p=new FormData(u);if((c=p.values(),function(e){if(Array.isArray(e))return r(e)}(c)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(c)||function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(c)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).some((function(e){return""==e||void 0})))return alert("You must complete all fields");t=p.get("description"),n=p.get("dueDate"),d=p.get("priority"),i=Date.now().toString(),a=Object.assign({},{description:t,dueDate:n,priority:d,check:!1,id:i}),l=S(),s=C.findIndex((function(e){return e.id==l.id})),C[s].todos.push(a),g(),h(),u.reset(),u.remove(),o.style.display="block"}function p(e){e.preventDefault(),function(e){var t=S(),n=C.findIndex((function(e){return e.id==t.id}));console.log(e.id);var r=C[n].todos.findIndex((function(t){return t.id==e.id}));C[n].todos.splice(r,1),g(),h()}(e.target.parentElement.parentElement)}function m(e){var t,n,r,d;e.preventDefault(),e.target.classList.toggle("checked"),t=e.target.parentElement.parentElement.parentElement,n=S(),r=C.findIndex((function(e){return e.id==n.id})),d=C[r].todos.findIndex((function(e){return e.id==t.id})),function(e){e.check?e.check=!1:e.check||(e.check=!0)}(C[r].todos[d]),g(),h()}function f(e){e.preventDefault();var t=e.target.parentElement.parentElement,n=t.classList.item(0);switch(t.reset(),t.remove(),n){case"edit-todo-form":h();break;case"edit-project-form":D();break;case"add-todo-form":o.style.display="block";break;case"add-project-form":i.style.display="block"}}function v(){document.querySelectorAll(".project .edit-btn").forEach((function(e){return e.addEventListener("click",(function(e){e.preventDefault();var t=n("edit-project"),r=e.target.parentElement.parentElement;r.lastChild.remove(),r.appendChild(t),function(){var e=document.querySelector(".edit-project-form"),t=document.querySelector(".go-back-btn"),n=e.parentElement.id;e.addEventListener("submit",(function(e){e.preventDefault(),function(e){var t,n,r,d=document.querySelector(".edit-project-form");t={name:new FormData(d).get("name")},n=e,r=C.findIndex((function(e){return e.id==n})),C[r].name=t.name,g(),D(),d.reset(),d.remove()}(n)})),t.addEventListener("click",f)}()}))}))}function b(){document.querySelectorAll(".todo .edit-btn").forEach((function(e){return e.addEventListener("click",(function(e){e.preventDefault();var n=t("edit-todo"),r=e.target.parentElement.parentElement,d=r.firstChild.lastChild,o=r.lastChild;d.remove(),o.remove(),r.appendChild(n),function(){var e=document.querySelector(".edit-todo-form"),t=document.querySelector(".go-back-btn"),n=e.parentElement.id;e.addEventListener("submit",(function(e){e.preventDefault(),function(e){var t,n,r,d,o,i=document.querySelector(".edit-todo-form"),c=new FormData(i);t={description:c.get("description"),dueDate:c.get("dueDate"),priority:c.get("priority")},n=e,r=S(),d=C.findIndex((function(e){return e.id==r.id})),o=C[d].todos.findIndex((function(e){return e.id==n})),C[d].todos[o].description=t.description,C[d].todos[o].dueDate=t.dueDate,C[d].todos[o].priority=t.priority,g(),h(),i.reset(),i.remove()}(n)})),t.addEventListener("click",f)}()}))}))}i.addEventListener("click",(function(e){e.preventDefault();var t,r,d=n("add-project");c.appendChild(d),i.style.display="none",t=document.querySelector(".add-project-form"),r=document.querySelector(".go-back-btn"),t.addEventListener("submit",l),r.addEventListener("click",f)})),o.addEventListener("click",(function(e){e.preventDefault();var n,r,d=t("add-todo");a.appendChild(d),o.style.display="none",n=document.querySelector(".add-todo-form"),r=document.querySelector(".go-back-btn"),n.addEventListener("submit",u),r.addEventListener("click",f)})),d.addEventListener("click",(function(e){e.target.classList.contains("project")&&L(e.target)}));var y=document.querySelector(".todo-list");function h(){y.innerHTML="";var e=S(),t=C.findIndex((function(t){return t.id==e.id}));C[t].todos.forEach((function(e){var t=function(e){var t=document.createElement("div"),n=document.createElement("div"),r=document.createElement("div"),d=document.createElement("span"),o=document.createElement("span"),i=document.createElement("span"),c=document.createElement("label"),a=document.createElement("button"),l=document.createElement("button"),s=document.createElement("input");return d.innerText="".concat(e.description),o.innerText="".concat(e.dueDate),i.innerText="".concat(e.priority),a.innerText="Delete",l.innerText="Edit",s.type="checkbox",t.classList.add("todo"),n.classList.add("info"),r.classList.add("buttons"),a.classList.add("btn"),a.classList.add("delete-btn"),l.classList.add("btn"),l.classList.add("edit-btn"),s.classList.add("check-btn"),t.id=e.id,n.appendChild(d),n.appendChild(o),n.appendChild(i),c.appendChild(s),e.check?(s.checked=!0,s.classList.add("checked"),c.append("Done")):e.check||(s.checked=!1,c.append("Not Done")),n.appendChild(c),r.appendChild(l),r.appendChild(a),t.appendChild(n),t.appendChild(r),t}(e);y.appendChild(t)})),document.querySelectorAll(".check-btn").forEach((function(e){return e.addEventListener("click",m)})),document.querySelectorAll(".todo .delete-btn").forEach((function(e){return e.addEventListener("click",p)})),b()}function E(e){C.push(e),g(),L(e)}function g(){sessionStorage.setItem("Projects",JSON.stringify(C))}function L(e){C.forEach((function(t){t.id==e.id&&(sessionStorage.setItem("Active",JSON.stringify(t)),D(),h())}))}function S(){return JSON.parse(sessionStorage.getItem("Active"))}var k=document.querySelector(".rendered-list");function D(){k.innerHTML="",C.forEach((function(e){var t=function(e){var t=S(),n=document.createElement("li"),r=document.createElement("span"),d=document.createElement("button"),o=document.createElement("button");return d.innerText="Delete",o.innerText="Edit",d.classList.add("btn"),d.classList.add("delete-btn"),o.classList.add("btn"),o.classList.add("edit-btn"),n.classList.add("project"),n.id=e.id,n.id==t.id&&n.classList.add("active"),r.appendChild(d),r.appendChild(o),n.append(e.name),n.appendChild(r),n}(e);k.appendChild(t)})),document.querySelectorAll(".project .delete-btn").forEach((function(e){return e.addEventListener("click",s)})),v()}var C=[],j={name:"Example Project",id:"312",todos:[{description:"description-1",dueDate:"2021-05-01",priority:"low",check:!0,id:"412"},{description:"description-2",dueDate:"2021-05-06",priority:"medium",check:!1,id:"314"}],active:!0};window.addEventListener("load",(function(){sessionStorage.getItem("Projects")?(C=!!sessionStorage.getItem("Projects")&&0!=sessionStorage.getItem("Projects").length&&JSON.parse(sessionStorage.getItem("Projects")),D(),h()):E(j)}))})();